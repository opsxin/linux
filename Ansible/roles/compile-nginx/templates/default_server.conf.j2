{% for vhost in nginx_vhost %}
server {
    listen      {{ vhost.listen|default('80') }};
    server_name {{ vhost.server_name|default('_') }};

    charset utf-8;

    root   {{ vhost.root }};
    index  {{ vhost.index|default('index.html index.htm') }};

{% if vhost.error_page is defined %}
    error_page  {{ vhost.error_page }};
{% endif %}
{% if vhost.access_log is defined %}
    access_log {{ vhost.access_log }} main;
{% endif %}
{% if vhost.error_log is defined %}
    error_log {{ vhost.error_log }};
{% endif%}

    location = /50x.html {
        root   {{ nginx_path }}/html;
    }

    location ~ /\.ht {
        deny  all;
    }
}
{% endfor %}
